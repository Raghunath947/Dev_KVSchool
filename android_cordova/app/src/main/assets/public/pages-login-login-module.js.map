{"version":3,"sources":["./src/app/pages/login/login.module.ts","./src/app/pages/login/login.page.scss","./src/app/pages/login/login.page.html","./src/app/pages/login/login-routing.module.ts","./src/app/pages/login/login.page.ts"],"names":[],"mappings":"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","file":"pages-login-login-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { LoginPageRoutingModule } from './login-routing.module';\n\nimport { LoginPage } from './login.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    LoginPageRoutingModule\n  ],\n  declarations: [LoginPage]\n})\nexport class LoginPageModule {}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJsb2dpbi5wYWdlLnNjc3MifQ== */\";","export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-title>KV School Login</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content >\\n  <div >\\n<ion-card style=\\\"margin-top:25%;background-color:lightgrey\\\">\\n  <div class=\\\"ion-padding\\\">\\n    <form #loginForm=\\\"ngForm\\\">\\n    <ion-grid>\\n      <ion-row>\\n          <ion-col size=\\\"12\\\">\\n            <ion-item>\\n              <ion-label position=\\\"floating\\\">Login ID</ion-label>\\n          \\n              <ion-input \\n              class=\\\"input\\\"\\n              name=\\\"loginid\\\" \\n              ngModel \\n              #uid=\\\"ngModel\\\" \\n              [(ngModel)] = loginid \\n              required \\n              placeholder=\\\"Enter Login ID\\\" \\n              ></ion-input>\\n            </ion-item>\\n          </ion-col>\\n          <ion-col size=\\\"12\\\" *ngIf=\\\"uid.touched && !uid.valid\\\">\\n              <ion-text color=\\\"danger\\\">\\n                <p>Please enter Login ID</p>\\n              </ion-text>\\n          </ion-col>\\n        </ion-row>\\n        <ion-row>\\n          <ion-col size=\\\"12\\\">\\n            <ion-item>\\n              <ion-label position=\\\"floating\\\"> Password</ion-label>\\n          \\n       \\n              <ion-input \\n              class=\\\"input\\\"\\n              name=\\\"password\\\" \\n              ngModel \\n              #upass=\\\"ngModel\\\" \\n              [(ngModel)] = password \\n              required \\n              placeholder=\\\"Enter password\\\" \\n              type=\\\"password\\\"\\n              ></ion-input>\\n            </ion-item>\\n          </ion-col>\\n          <ion-col size=\\\"12\\\" *ngIf=\\\"upass.touched && !upass.valid\\\">\\n              <ion-text color=\\\"danger\\\">\\n                <p>Please enter password</p>\\n              </ion-text>\\n          </ion-col>\\n        </ion-row>\\n        <ion-row>\\n          <ion-col size=\\\"12\\\">\\n            <ion-button expand=\\\"block\\\" color=\\\"primary\\\" [disabled]=\\\"!loginForm.valid\\\" (click)=\\\"signIn()\\\"> Log In </ion-button>\\n          </ion-col>\\n        </ion-row>\\n    </ion-grid>\\n  </form>\\n  </div>\\n</ion-card>\\n</div>\\n  </ion-content>\\n\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { LoginPage } from './login.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: LoginPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class LoginPageRoutingModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { AuthService } from 'src/app/services/auth.service';\nimport { CommonfunctionService } from 'src/app/services/commonfunction.service';\nimport { Platform } from '@ionic/angular';\nimport { Router } from '@angular/router';\nimport { LoadingController, AlertController } from '@ionic/angular';\n\n@Component({\n  selector: 'app-login',\n  templateUrl: './login.page.html',\n  styleUrls: ['./login.page.scss'],\n})\nexport class LoginPage implements OnInit {\n\n  userData: any;\n  loginid: string = '';\n  password: string = '';\n  isLoading = false;\n  constructor(\n    private auth: AuthService, \n    private CFS: CommonfunctionService, \n    private platform: Platform,\n    private router: Router,\n    private loadingCtrl: LoadingController,\n    private alertCtrl: AlertController\n    ) { \n      let isUserLoggedIn = localStorage.getItem('currentUserId');\n      if(isUserLoggedIn){\n        this.router.navigateByUrl('/home');\n      }\n    }\n\n  ngOnInit() {\n  }\n\n  signIn(){\n    this.platform.ready().then(() => {\n      if((this.password != '') &&  (this.loginid != '')) {\n        console.log('LoginID: ',this.loginid);\n        console.log('Password: ',this.password);\n        this.isLoading = true;\n        this.loadingCtrl\n          .create({ keyboardClose: true, message: 'Logging in...' })\n          .then(loadingEl => {\n            loadingEl.present();\n    this.auth.loginCustomer(this.loginid,this.password).then((response) => {\n      let data=response['data'];\n      if(data['token']){\n        console.log('Returned Token: ',data['token']);\n      \n        this.auth.getUserData(this.loginid).subscribe((usrData) => {\n          this.userData = usrData['data'][0];\n          console.log('User Data: ', this.userData);\n          let currentUserId = this.userData['unique_id'];\n          let access_level = this.userData['access_level'];\n          let uid = this.userData['login_id'];\n          let name = this.userData['name'];\n          let email= this.userData['email_id'];\n          let mobile = this.userData['mobile_number'];\n          let stuent_class = this.userData['class'];\n          let student_name = this.userData['student_name'];\n          let section= this.userData['section'];\n          let roll_no = this.userData['roll_no'];\n          let recieved_email= this.userData['recieved_email'];\n          let recieved_sms= this.userData['recieved_sms'];\n          let is_class= this.userData['is_class_moderator'];\n          let is_section= this.userData['is_section_moderator'];\n          let home_number= this.userData['home_number'];\n          let register_time= this.userData['registered_at_time'];\n          localStorage.setItem('uniqe_id',currentUserId);\n          localStorage.setItem('uid',uid);\n          localStorage.setItem('access_level',access_level);\n          localStorage.setItem('name',name);\n          localStorage.setItem('student_name',student_name);\n          localStorage.setItem('mobile_number',mobile);\n          localStorage.setItem('section',section);\n          localStorage.setItem('class',stuent_class);\n          localStorage.setItem('roll_no',roll_no);\n          localStorage.setItem('email_id',email);\n          localStorage.setItem('password',this.password);\n          localStorage.setItem('recieved_email',recieved_email);\n          localStorage.setItem('recieved_sms',recieved_sms);\n          localStorage.setItem('is_class_moderator',is_class);\n          localStorage.setItem('is_section_moderator',is_section);\n          localStorage.setItem('home_number',home_number);\n          localStorage.setItem('registered_at_time',register_time);\n\n          console.log(localStorage.getItem('uid'));\n        console.log(localStorage.getItem('access_level'));\n        console.log(JSON.stringify(localStorage.getItem('email_id')));\n\n        });\n\n        loadingEl.dismiss();\n        this.router.navigateByUrl('/home');\n      } else {\n        loadingEl.dismiss();\n      \n        let message = 'Could not logged in. Either connection error or you are not recognized by the server. Try again!';\n      \n        this.showAlert(message);\n      } \n    });\n  });\n      } else {\n        this.CFS.presentToast('Please fill up the input fields correctly', true,'bottom',2000);\n      }\n    });\n\n  }\n\n  \n  private showAlert(message: string) {\n    this.alertCtrl\n      .create({\n        header: 'Authentication failed',\n        message: message,\n        buttons: ['Okay']\n      })\n      .then(alertEl => alertEl.present());\n  }\n\n}"],"sourceRoot":"webpack:///"}